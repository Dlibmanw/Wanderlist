<% provide :head_tags do %>
  <%= javascript_include_tag 'https://maps.googleapis.com/maps/api/js?key='+Rails.application.credentials.google_maps_API_key %>
  <meta name='turbolinks-visit-control' content='reload'>
  <script>
    document.addEventListener("DOMContentLoaded", function(){
      var route = []
      <%@places.each do |x|%>
        route.push({lat:<%=x.latitude%>, lng:<%=x.longitude%>})
      <%end%>
      initMap(route)
    });

  </script>

<% end %>

<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @route.title %>
</p>

<p>
  <strong>Description:</strong>
  <%= @route.description %>
</p>

<p>
  <div <%= @route.picture_url %> ></div>
</p>

<p>
    <div id="map"></div>
</p>
<button id="get_directions">Get Directions</button>
<p>
<strong>Places</strong>
<% @places.each do |x| %>
  <br>
  <tr>
  <Strong>Name:</strong>
    <td><%= x.name %></td>
  </tr>
  <tr>
  <Strong>Description:</strong>
    <td><%= x.description %></td>
  </tr>

  </br>
<% end %>

<%= link_to 'Edit', edit_route_path(@route) %> |
<%= link_to 'Back', routes_path %>
