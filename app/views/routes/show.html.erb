<% provide :head_tags do %>
  <meta name='turbolinks-visit-control' content='reload'>
  <script>
    document.addEventListener("DOMContentLoaded", function(){
      initMap(<%=@place.latitude%>, <%=@place.longitude%>)
      <%@places.each do |x|%>
        initMarker(<%=x.latitude%> , <%=x.longitude%>)
      <%end%>

    document.getElementById("vote").addEventListener("click", function(){
      $.ajax({
        type: "POST",
        url: "/routes/upvote",
        remote: true,
        success(data) {}
      });
    });
  });

  </script>

<% end %>

<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @route.title %>
</p>

<p>
  <strong>Points:</strong>
  <%= @route.points %><button id="vote">Add your vote</button>
  <%= link_to "â–²Click here to add your vote", upvote_route_path(@route), method: :post %>
</p>

<p>
  <strong>Description:</strong>
  <%= @route.description %>
</p>

<p>
    <div id="map"></div>
</p>

<p>
<strong>Places</strong>
<% @places.each do |x| %>
  <br>
  <tr>
  <Strong>Name:</strong>
    <td><%= x.name %></td>
  </tr>
  <tr>
  <Strong>Description:</strong>
    <td><%= x.description %></td>
  </tr>

  </br>
<% end %>

<%= link_to 'Edit', edit_route_path(@route) %> |
<%= link_to 'Back', routes_path %>
